---
aggregation:
  sisyphus: samba-client
appstream:
  name: Samba
  icon: /samba/samba-logo.svg
  summary: Пакет программ, которые позволяют обращаться к сетевым дискам и принтерам на различных операционных системах по протоколу SMB/CIFS.
  metadata_license:
    name: GNU GPLv3
    link: https://choosealicense.com/licenses/gpl-3.0/
  developer:
    name: The Samba Team
  url:
    homepage: https://www.samba.org/
---

# Samba

Samba — пакет программ, которые позволяют обращаться к сетевым дискам и принтерам на различных операционных системах по протоколу SMB/CIFS.

## Установка из репозитория

**Samba** можно установить через терминал:

::: code-group

```shell[apt-get]
su -
apt-get update
apt-get install samba samba-client
```

```shell[epm]
su -
epm -i samba samba-client
```

:::

## Обзор сетевых ресурсов в Nautilus

Для включения обзора сетевых ресурсов SMB протокола в Nautilus достаточно выполнить следующее:

1. Изменить группу в `/etc/samba/smb.conf` c Samba на что-то своё, например: WORKGROUP
2. Включить сервис Samba (smb.service) в системе, если ещё не включено
3. Установить пакет `avahi-daemon`
   ::: code-group

```shell[apt-get]
su -
apt-get install avahi-daemon
```

```shell[epm]
su -
epm install avahi-daemon
```

:::

## Управление пользователями SAMBA

По умолчанию конфигурационный файл `smb.conf` содержит следующую строку:

```
passdb backend = tdbsam
```

что говорит нам о том, что samba использует механизм авторизации основанный на базе данных TDB

Добавить пользователя в таком случае можно используя следующий подход:

```shell
su -
pdbedit -au username
```

Чтобы посмотреть текущих пользователей:

```shell
su -
pdbedit -L
```

## Android TV и Расшаривание папок

Ниже приведены действия, для того, чтобы расшарить на своем компьютере папку для доступа к ней из локальной сети, к примеру с того же телевизора Android TV через **NOVA Video Player**, учитывая что два клиента подключены к одному роутеру.

Для начала делаем, что написано Выше и добавляем локального пользователя через **pdbedit -au username**.

В настройках Gnome -> "Общий доступ" включаем **"Общий доступ к файлам"**, но **НЕ** включаем **"Требовать пароль"**.

Далее добавляем нашего пользователя в группу **usershares** и перезагружаемся

```shell
su -
usermod -aG usershares username
systemctl reboot
```

**username** = локальному пользователю, под которым заходим в систему.

Далее в Nautilus на нужном каталоге по правой кнопке мыши нажимаем настроить общий доступ. В данном окне у нас будет стоять галочка на **"Открыть общий доступ к папке"** и **"Имя ресурса"** больше ничего не ставим.

После чего, на Android TV в **Nova Video Player** раздел **Сеть**  подраздел **Общие папки (SMB)** мы увидим наш компьютер, в котором появится расшаренная папка. 

Логин и пароль для входа используем локальный, нашего пользователя.

Смотрим фильмы с компьютера.